<section class="py-5">
  <div class="container">
    <div class="row gx-5">
      <aside
        class="col-lg-6"
        style="display: flex; justify-content: space-evenly"
      >
        <div class="image-carousel-container">
          <div class="image-carousel" #carousel>
            <ng-container *ngFor="let image of selectedItem?.img">
              <a
                data-fslightbox="mygallery"
                class="image-wrapper"
                target="_blank"
                data-type="image"
                href="#"
                (click)="$event.preventDefault(); changeMainImage(image)"
              >
                <img class="thumbnail" [src]="image" alt="Thumbnail image" />
              </a>
            </ng-container>
          </div>
        </div>

        <div class="rounded-4 mb-3 d-flex justify-content-center">
          <a
            data-fslightbox="mygallery"
            class="rounded-4"
            target="_blank"
            data-type="image"
          >
            <img
              style="max-width: 100%; max-height: 100vh; margin: auto"
              class="rounded-4 fit"
              [src]="setImage"
              alt="Main product image"
            />
          </a>
        </div>
      </aside>
      <main class="col-lg-6">
        <div class="ps-lg-3">
          <h4 class="title text-dark">{{ selectedItem?.name }}</h4>

          <div class="d-flex flex-row my-3">
            <div class="text-warning mb-1 me-2">
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
              <span class="ms-1">4.6</span> 
              <!-- <a href="#" class="text-primary">2 Reviews</a> -->
            </div>
          </div>

          <div class="mb-3" style="display: flex; gap: 5px">
            <span class="text-success h5" >{{ selectedItem?.discount }}% OFF</span>
            <br/>
            <span class="text-muted  h5 text-danger" 
              ><del>₹{{ selectedItem?.price }}</del></span
            >
            <span class="h5 text-success">₹{{ selectedItem?.rate }}</span>
            
          </div>

          <div class="text-muted small">
            <i class="fas fa-shopping-basket"></i> 125 people bought this in the
            last 7 days
          </div>

          <div class="mt-3">
            <span class="badge bg-success">BUY 2 FOR 1699</span>
            <span class="badge bg-secondary">OVERSIZED FIT</span>
            <span class="badge bg-light text-dark">THICK PREMIUM FABRIC</span>
          </div>

          <hr />

          <!-- Color Selection -->
          <div class="mb-3">
            <label class="fw-bold"
              >Colour Options: {{ selectedItem?.color }}</label
            >
            <div class="d-flex">
              <button
                *ngFor="let color of selectedItem?.colors"
                class="btn border rounded-circle mx-1"
                [style.background]="color"
                [class.active]="color === selectedItem?.color"
              ></button>
            </div>
          </div>

          <!-- Size Selection -->
          <div class="mb-3">
            <label class="fw-bold">Select Size</label>
            <div class="d-flex">
              <button
                class="btn btn-outline-dark me-2"
                [class.active]="selectedItem?.size"
              >
                {{ selectedItem?.size }}
              </button>
            </div>
            <!-- <a href="#" class="text-primary small">SIZE GUIDE</a> -->
          </div>

          <!-- Add to Cart and Wishlist -->
          <div class="d-flex">
            <button
              class="btn btn-warning flex-grow-1 me-2"
              (click)="addTocart(selectedItem)"
            >
              <i class="fa fa-shopping-basket"></i> ADD TO BAG
            </button>
            <button
              class="btn btn-light border"
              (click)="SaveList(selectedItem)"
            >
              <i class="fa fa-heart"></i> WISHLIST
            </button>
          </div>
          <div class="description-item">
            <span class="text-black">{{ selectedItem?.description }}% OFF</span>
          </div>
        </div>
      </main>
    </div>
  </div>
</section>

<!-- <section class="bg-light border-top py-4">
  <div class="container">
    <div class="row gx-4">
      <div class="col-lg-8 mb-4">
        <div class="border rounded-2 px-3 py-2 bg-white">
          <ul class="nav nav-pills nav-justified mb-3" id="ex1" role="tablist">
            <li class="nav-item" role="presentation">
              <a
                class="nav-link active"
                id="ex1-tab-1"
                data-mdb-toggle="pill"
                href="#ex1-pills-1"
                role="tab"
                aria-controls="ex1-pills-1"
                aria-selected="true"
                >Specification</a
              >
            </li>
            <li class="nav-item" role="presentation">
              <a
                class="nav-link"
                id="ex1-tab-2"
                data-mdb-toggle="pill"
                href="#ex1-pills-2"
                role="tab"
                aria-controls="ex1-pills-2"
                aria-selected="false"
                >Warranty info</a
              >
            </li>
            <li class="nav-item" role="presentation">
              <a
                class="nav-link"
                id="ex1-tab-3"
                data-mdb-toggle="pill"
                href="#ex1-pills-3"
                role="tab"
                aria-controls="ex1-pills-3"
                aria-selected="false"
                >Shipping info</a
              >
            </li>
            <li class="nav-item" role="presentation">
              <a
                class="nav-link"
                id="ex1-tab-4"
                data-mdb-toggle="pill"
                href="#ex1-pills-4"
                role="tab"
                aria-controls="ex1-pills-4"
                aria-selected="false"
                >Seller profile</a
              >
            </li>
          </ul>
          <div class="tab-content" id="ex1-content">
            <div
              class="tab-pane fade show active"
              id="ex1-pills-1"
              role="tabpanel"
              aria-labelledby="ex1-tab-1"
            >
              <p>
                With supporting text below as a natural lead-in to additional
                content. Lorem ipsum dolor sit amet, consectetur adipisicing
                elit.
              </p>
              <div class="row mb-2">
                <div class="col-12 col-md-6">
                  <ul class="list-unstyled mb-0">
                    <li>
                      <i class="fas fa-check text-success me-2"></i>Some great
                      feature name here
                    </li>
                    <li>
                      <i class="fas fa-check text-success me-2"></i>Lorem ipsum
                      dolor sit amet
                    </li>
                    <li>
                      <i class="fas fa-check text-success me-2"></i>Duis aute
                      irure dolor in reprehenderit
                    </li>
                    <li>
                      <i class="fas fa-check text-success me-2"></i>Optical
                      heart sensor
                    </li>
                  </ul>
                </div>
                <div class="col-12 col-md-6 mb-0">
                  <ul class="list-unstyled">
                    <li>
                      <i class="fas fa-check text-success me-2"></i>Easy fast
                      and very good
                    </li>
                    <li>
                      <i class="fas fa-check text-success me-2"></i>Some great
                      feature name here
                    </li>
                    <li>
                      <i class="fas fa-check text-success me-2"></i>Modern style
                      and design
                    </li>
                  </ul>
                </div>
              </div>
              <table class="table border mt-3 mb-2">
                <tr>
                  <th class="py-2">Display:</th>
                  <td class="py-2">13.3-inch LED-backlit display with IPS</td>
                </tr>
                <tr>
                  <th class="py-2">Processor capacity:</th>
                  <td class="py-2">2.3GHz dual-core Intel Core i5</td>
                </tr>
                <tr>
                  <th class="py-2">Memory (RAM):</th>
                  <td class="py-2">8GB 2133MHz LPDDR3</td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section> -->
<div class="comment-section">
  <h3>Comment Section</h3>

  <div class="comment-box">
    <input
      type="text"
      placeholder="Write your comment here..."
      name="comment"
      [(ngModel)]="comment"
      class="comment-input"
    />
    <button (click)="addComment()" class="comment-button">Add Comment</button>
  </div>
  <div
    *ngFor="let comment of selectedItem?.comments"
    class="comment-item fade-in"
  >
    <strong class="comment-username">{{ comment?.user.username }}:</strong>
    <span class="comment-text">{{ comment.comment }}</span>
  </div>
</div>
<!-- <div class="container">
    <div class="Under-container">
      <div class="Inner-User_container">
       
        <ul class="list-group" style="display: flex; flex-direction: row; flex-wrap: wrap; gap: 10px; justify-content: space-evenly;">
          <li *ngFor="let item of items" class="item-list" style="display: flex; width: 20%;" (click)="ItemDetail(item)">
            <div class="item-details">
              <img [src]="item.img" alt="{{ item.name }}" class="img-fluid mt-2" />
              <div>
                <strong class="item-name">{{ truncateName(item.name) }}</strong><br />
                <span style="font-weight: 500; color:red">{{ item.rate }} USD</span><br />
                <span style="font-weight: 500;">{{ truncateName(item.description) }}</span><br />
                <span style="font-weight: 500; color:red">{{ item.color }}</span><br />
                <button style="font-weight: 500; ">{{ item.size }}</button><br />
                
                <span style="font-weight: 500;">Likes: {{ item.likesCount }}</span><br />
                <div *ngFor="let comment of item.comments">
                  <strong>comment:{{comment.user.username}}</strong> {{ comment.comment }}<br /> 
                </div>
              </div>
            </div> 
          </li>
        </ul>
  
        <div *ngIf="items.length === 0" class="alert alert-warning text-center mt-4">
          No items available!
        </div>
      </div>
    </div>
  </div> -->
<div class="container-image">
  <div class="rows" *ngFor="let item of visibleItems">
    <div class="card product-card">
      <!-- Discount / Offer Badge -->
      <span *ngIf="item.offer" class="offer-badge">{{ item.offer }}</span>

      <!-- Product Image -->
      <img
        [src]="item.img[0]"
        alt="{{ item.name }}"
        class="card-img-top"
        (click)="ItemDetail(item)"
      />

      <div class="card-body">
        <!-- Product Name -->
        <h5 class="card-title">{{ truncateName(item.name) }}</h5>

        <!-- Description -->
        <p class="card-text text-muted">
          {{ truncateName(item.description) }}
        </p>

        <!-- Price Details -->
        <div class="price-details">
          <span class="final-price">₹{{ item.rate }}</span>
          <span class="original-price">₹{{ item.price }}</span>
          <span class="discount">{{ item.discount }}% OFF</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Load More Button -->
  <div class="load-more-container">
    <button
      *ngIf="visibleItems.length < items.length"
      class="btn btn-primary"
      (click)="loadMoreItems()"
    >
      Load More
    </button>
  </div>
</div>
